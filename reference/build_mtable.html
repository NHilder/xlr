<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Summarise a multiple response table — build_mtable • xlr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Summarise a multiple response table — build_mtable"><meta name="description" content="This function can take one or two multiple response responses and generate
a summary table with them. You can also cut these columns by other categorical
columns by specify the cols parameter."><meta property="og:description" content="This function can take one or two multiple response responses and generate
a summary table with them. You can also cut these columns by other categorical
columns by specify the cols parameter."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">xlr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.3.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/xlr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NHilder/xlr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Summarise a multiple response table</h1>
      <small class="dont-index">Source: <a href="https://github.com/NHilder/xlr/blob/main/R/build_multiple_response_table.R" class="external-link"><code>R/build_multiple_response_table.R</code></a></small>
      <div class="d-none name"><code>build_mtable.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function can take one or two multiple response responses and generate
a summary table with them. You can also cut these columns by other categorical
columns by specify the cols parameter.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">build_mtable</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">mcols</span>,</span>
<span>  cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  table_title <span class="op">=</span> <span class="st">""</span>,</span>
<span>  use_questions <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  use_NA <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  wt <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  footnote <span class="op">=</span> <span class="st">""</span>,</span>
<span>  exclude_codes <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  exclude_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">exclude_codes</span>, collapse <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>a data frame or tidy object.</p></dd>


<dt id="arg-mcols">mcols<a class="anchor" aria-label="anchor" href="#arg-mcols"></a></dt>
<dd><p>the column(s) that are multiple response questions. See
the <code>Details</code> for more details of how these columns should be structured.</p></dd>


<dt id="arg-cols">cols<a class="anchor" aria-label="anchor" href="#arg-cols"></a></dt>
<dd><p>the column(s) that we want to calculate the sum/percentage of and
the multiple response question.</p></dd>


<dt id="arg-table-title">table_title<a class="anchor" aria-label="anchor" href="#arg-table-title"></a></dt>
<dd><p>the title of the table sheet</p></dd>


<dt id="arg-use-questions">use_questions<a class="anchor" aria-label="anchor" href="#arg-use-questions"></a></dt>
<dd><p>if the data has column labels (was a imported .sav)
file, convert the column label to a footnote with the question.</p></dd>


<dt id="arg-use-na">use_NA<a class="anchor" aria-label="anchor" href="#arg-use-na"></a></dt>
<dd><p>logical. whether to include <code>NA</code> values in the table. For more complicated
<code>NA</code> processing post creation, we recommend using filter.</p></dd>


<dt id="arg-wt">wt<a class="anchor" aria-label="anchor" href="#arg-wt"></a></dt>
<dd><p>Specify a weighting variable, if <code>NULL</code> no weight is applied.</p></dd>


<dt id="arg-footnote">footnote<a class="anchor" aria-label="anchor" href="#arg-footnote"></a></dt>
<dd><p>optional parameter to pass a custom footnote to the question,
this parameter overwrites <code>use_questions</code>.</p></dd>


<dt id="arg-exclude-codes">exclude_codes<a class="anchor" aria-label="anchor" href="#arg-exclude-codes"></a></dt>
<dd><p>vector. Pass values to this argument if there
exists values in the multiple response question but indicate someone saw the
question but did not response to the value (e.g. <code>-99</code>, <code>0</code>).</p></dd>


<dt id="arg-exclude-label">exclude_label<a class="anchor" aria-label="anchor" href="#arg-exclude-label"></a></dt>
<dd><p>string. A name for the value of the <code>seen but answered</code>
response.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>These dots are for future extensions and must be empty.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a <code>xlr_table</code> object. Use <a href="write_xlsx.html">write_xlsx</a> to write to an <code>Excel</code> file.
See <a href="xlr_table.html">xlr_table</a> for more information.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A multiple response response is a series of columns with a single unique
response that stores survey data where a respondent may have chosen
multiple options. This function works if this data is stored in a <strong>wide</strong>
format. To have a valid multiple response column all the columns should
start with the same text, and each contain a unique value. That is it
has the form:</p>
<p></p><div class="sourceCode r"><pre><code><span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>multi_col_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="cn">NA</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>           multi_col_2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>           multi_col_3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="cn">NA</span>,<span class="fl">1</span><span class="op">)</span></span>
<span> <span class="op">)</span></span>
<span><span class="co">#&gt;   multi_col_1 multi_col_2 multi_col_3</span></span>
<span><span class="co">#&gt; 1           1           1          NA</span></span>
<span><span class="co">#&gt; 2          NA           1          NA</span></span>
<span><span class="co">#&gt; 3           1           1           1</span></span></code></pre><p></p></div>
<p>This is how popular survey platforms such as Qualtrics output this data type. If
your data is long, you will need to pivot the data before hand, we recommend
using <a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a>.</p>
<p>By default this function converts <a href="https://haven.tidyverse.org/reference/labelled.html" class="external-link">labelled</a> to a <a href="xlr_vector.html">xlr_vector</a>
by default (and underlying it is a <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code> type).</p>
<p>This function and its family (<a href="build_table.html">build_table</a>, <a href="build_qtable.html">build_qtable</a>) is designed to
work with data with columns of type <code><a href="https://haven.tidyverse.org/reference/labelled.html" class="external-link">haven::labelled</a></code>,
which is the default format of data read with <code><a href="https://haven.tidyverse.org/reference/read_spss.html" class="external-link">haven::read_sav</a></code>/has the format
of <code>.sav</code>. <code>.sav</code> is the default file function type of data from <code>SPSS</code> and
can be exported from popular survey providers such as Qualtrics. When you
read in data with <code><a href="https://haven.tidyverse.org/reference/read_spss.html" class="external-link">haven::read_sav</a></code> it imports data with the questions,
labels for the response options etc.</p>
<p>See <a href="https://haven.tidyverse.org/reference/labelled.html" class="external-link">labelled</a> and <a href="https://haven.tidyverse.org/reference/read_spss.html" class="external-link">read_sav</a> if you would like more
details on the importing type.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nhilder.github.io/xlr/">xlr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘dplyr’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     filter, lag</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, setdiff, setequal, union</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You can use this function to calculate the number of people that have</span></span></span>
<span class="r-in"><span><span class="co"># responded to the question `What is your favourite colour`</span></span></span>
<span class="r-in"><span><span class="fu">build_mtable</span><span class="op">(</span><span class="va">clothes_opinions</span>,</span></span>
<span class="r-in"><span>             <span class="st">"Q2"</span>,</span></span>
<span class="r-in"><span>             table_title <span class="op">=</span> <span class="st">"What is your favourite colour?"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">What is your favourite colour?</span> <span style="color: #00BBBB;">──────────────────────────────────────────────</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A xlr_table: 6 x 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Q2             N N_group Percent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_pct&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Black        897     995     90%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Blue         192     995     19%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Green        323     995     32%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Grey         494     995     50%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> Red          792     995     80%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> Yellow       208     995     21%</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The function also lets you to see the number of NA questions (this is</span></span></span>
<span class="r-in"><span><span class="co"># where someone doesn't answer any option)</span></span></span>
<span class="r-in"><span><span class="fu">build_mtable</span><span class="op">(</span><span class="va">clothes_opinions</span>,</span></span>
<span class="r-in"><span>             <span class="st">"Q2"</span>,</span></span>
<span class="r-in"><span>             table_title <span class="op">=</span> <span class="st">"What is your favourite colour?"</span>,</span></span>
<span class="r-in"><span>             use_NA <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">What is your favourite colour?</span> <span style="color: #00BBBB;">──────────────────────────────────────────────</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A xlr_table: 7 x 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Q2             N N_group Percent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_pct&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Black        897   1,000     90%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Blue         192   1,000     19%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Green        323   1,000     32%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Grey         494   1,000     49%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> Red          792   1,000     79%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> Yellow       208   1,000     21%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> NA             5   1,000      0%</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You can also cut all questions in the multiple response functions by another</span></span></span>
<span class="r-in"><span><span class="co"># column</span></span></span>
<span class="r-in"><span><span class="fu">build_mtable</span><span class="op">(</span><span class="va">clothes_opinions</span>,</span></span>
<span class="r-in"><span>             <span class="st">"Q2"</span>,</span></span>
<span class="r-in"><span>             <span class="va">gender2</span>,</span></span>
<span class="r-in"><span>             table_title <span class="op">=</span> <span class="st">"Your favourite colour by gender"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Your favourite colour by gender</span> <span style="color: #00BBBB;">─────────────────────────────────────────────</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A xlr_table: 18 x 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    gender2    Q2             N N_group Percent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_pct&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> male       Black        413     460     90%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> male       Blue          82     460     18%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> male       Green        144     460     31%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> male       Grey         225     460     49%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> male       Red          371     460     81%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> male       Yellow        95     460     21%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> female     Black        413     460     90%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> female     Blue          97     460     21%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> female     Green        158     460     34%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> female     Grey         237     460     52%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> female     Red          356     460     77%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> female     Yellow        94     460     20%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> non-binary Black         71      75     95%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> non-binary Blue          13      75     17%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> non-binary Green         21      75     28%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> non-binary Grey          32      75     43%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">17</span> non-binary Red           65      75     87%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">18</span> non-binary Yellow        19      75     25%</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># By setting `use_questions=TRUE` then the footnote will be the questions</span></span></span>
<span class="r-in"><span><span class="co"># labels. This is useful to see what the question is.</span></span></span>
<span class="r-in"><span><span class="co"># The function will try to pull out this based on the question label, and</span></span></span>
<span class="r-in"><span><span class="co"># will manipulate try and get the correct label.</span></span></span>
<span class="r-in"><span><span class="fu">build_mtable</span><span class="op">(</span><span class="va">clothes_opinions</span>,</span></span>
<span class="r-in"><span>             <span class="st">"Q2"</span>,</span></span>
<span class="r-in"><span>             <span class="va">gender2</span>,</span></span>
<span class="r-in"><span>             table_title <span class="op">=</span> <span class="st">"Your favourite colour by gender"</span>,</span></span>
<span class="r-in"><span>             use_questions <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Your favourite colour by gender</span> <span style="color: #00BBBB;">─────────────────────────────────────────────</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A xlr_table: 18 x 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    gender2    Q2             N N_group Percent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_pct&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> male       Black        413     460     90%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> male       Blue          82     460     18%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> male       Green        144     460     31%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> male       Grey         225     460     49%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> male       Red          371     460     81%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> male       Yellow        95     460     21%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> female     Black        413     460     90%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> female     Blue          97     460     21%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> female     Green        158     460     34%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> female     Grey         237     460     52%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> female     Red          356     460     77%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> female     Yellow        94     460     20%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> non-binary Black         71      75     95%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> non-binary Blue          13      75     17%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> non-binary Green         21      75     28%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> non-binary Grey          32      75     43%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">17</span> non-binary Red           65      75     87%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">18</span> non-binary Yellow        19      75     25%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-style: italic;">Questions</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-style: italic;">The gender of the participant</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># It is common for your data to include 'other' responses in a multiple</span></span></span>
<span class="r-in"><span><span class="co"># response column. You should remove the column before running build_mtable</span></span></span>
<span class="r-in"><span><span class="va">clothes_opinions</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">Q3_other</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">build_mtable</span><span class="op">(</span><span class="st">"Q3"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A xlr_table: 3 x 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Q3              N N_group Percent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_pct&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Earrings      290     869     33%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Necklaces     201     869     23%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Rings         783     869     90%</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You can also specify up to a maxium of two different multiple response</span></span></span>
<span class="r-in"><span><span class="co"># columns.</span></span></span>
<span class="r-in"><span><span class="va">clothes_opinions</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">Q3_other</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">build_mtable</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Q2"</span>, <span class="st">"Q3"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A xlr_table: 18 x 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Q2       Q3              N    N_Q2 Percent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_pct&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Black    Earrings      264     897     29%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Black    Necklaces     180     897     20%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Black    Rings         693     897     77%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Blue     Earrings       59     192     31%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Blue     Necklaces      49     192     26%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Blue     Rings         145     192     76%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Green    Earrings       98     323     30%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Green    Necklaces      73     323     23%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Green    Rings         247     323     76%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Grey     Earrings      143     494     29%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> Grey     Necklaces      96     494     19%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> Grey     Rings         391     494     79%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> Red      Earrings      228     792     29%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> Red      Necklaces     160     792     20%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> Red      Rings         620     792     78%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> Yellow   Earrings       52     208     25%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">17</span> Yellow   Necklaces      35     208     17%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">18</span> Yellow   Rings         161     208     77%</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># These cam also be cut by other columns.</span></span></span>
<span class="r-in"><span><span class="va">clothes_opinions</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">Q3_other</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">build_mtable</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Q2"</span>, <span class="st">"Q3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               <span class="va">gender2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A xlr_table: 54 x 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    gender2  Q2       Q3              N N_group Percent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_pct&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> male     Black    Earrings      127     413     31%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> male     Black    Necklaces      78     413     19%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> male     Black    Rings         315     413     76%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> male     Blue     Earrings       23      82     28%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> male     Blue     Necklaces      21      82     26%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> male     Blue     Rings          61      82     74%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> male     Green    Earrings       43     144     30%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> male     Green    Necklaces      31     144     22%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> male     Green    Rings         108     144     75%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> male     Grey     Earrings       72     225     32%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 44 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># This function also supports weights and manual footnotes</span></span></span>
<span class="r-in"><span><span class="va">clothes_opinions</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">Q3_other</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">build_mtable</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Q2"</span>, <span class="st">"Q3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               <span class="va">gender2</span>,</span></span>
<span class="r-in"><span>               wt <span class="op">=</span> <span class="va">weight</span>,</span></span>
<span class="r-in"><span>               footnote <span class="op">=</span> <span class="st">"This is an example footnote."</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A xlr_table: 54 x 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    gender2  Q2       Q3                N   N_group Percent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;x_num&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;x_num&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_pct&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> male     Black    Earrings  127,605.0 422,100.0     30%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> male     Black    Necklaces  73,623.0 422,100.0     17%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> male     Black    Rings     326,852.0 422,100.0     77%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> male     Blue     Earrings   20,749.0  78,108.0     27%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> male     Blue     Necklaces  15,806.0  78,108.0     20%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> male     Blue     Rings      54,686.0  78,108.0     70%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> male     Green    Earrings   44,326.0 146,440.0     30%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> male     Green    Necklaces  29,053.0 146,440.0     20%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> male     Green    Rings     110,288.0 146,440.0     75%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> male     Grey     Earrings   76,754.0 232,228.0     33%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 44 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-style: italic;">This is an example footnote.</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sometimes your survey data includes special codes that indicate a respondent</span></span></span>
<span class="r-in"><span><span class="co"># saw the question but didn't select that option (e.g., 0 or -99). Use</span></span></span>
<span class="r-in"><span><span class="co"># exclude_codes to filter these out from the count</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># lets first change our data structure to match</span></span></span>
<span class="r-in"><span><span class="co"># a normal set up in a survey</span></span></span>
<span class="r-in"><span><span class="va">clothes_opinions</span> <span class="op">&lt;-</span> <span class="va">clothes_opinions</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"Q2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               <span class="op">~</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span>, <span class="st">"0"</span>, <span class="va">.x</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">build_mtable</span><span class="op">(</span><span class="va">clothes_opinions</span>,</span></span>
<span class="r-in"><span>             <span class="st">"Q2"</span>,</span></span>
<span class="r-in"><span>             table_title <span class="op">=</span> <span class="st">"What is your favourite colour?"</span>,</span></span>
<span class="r-in"><span>             exclude_codes <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">What is your favourite colour?</span> <span style="color: #00BBBB;">──────────────────────────────────────────────</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A xlr_table: 7 x 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Q2             N N_group Percent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_pct&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Black        897   1,000     90%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Blue         192   1,000     19%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Green        323   1,000     32%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Grey         494   1,000     49%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> Red          792   1,000     79%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> Yellow       208   1,000     21%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> 0              5   1,000      0%</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You can exclude multiple codes by passing a vector</span></span></span>
<span class="r-in"><span><span class="fu">build_mtable</span><span class="op">(</span><span class="va">clothes_opinions</span>,</span></span>
<span class="r-in"><span>             <span class="st">"Q2"</span>,</span></span>
<span class="r-in"><span>             table_title <span class="op">=</span> <span class="st">"What is your favourite colour?"</span>,</span></span>
<span class="r-in"><span>             exclude_codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="op">-</span><span class="fl">99</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">What is your favourite colour?</span> <span style="color: #00BBBB;">──────────────────────────────────────────────</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A xlr_table: 7 x 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Q2             N N_group Percent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_pct&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Black        897   1,000     90%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Blue         192   1,000     19%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Green        323   1,000     32%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Grey         494   1,000     49%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> Red          792   1,000     79%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> Yellow       208   1,000     21%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> 0_-99          5   1,000      0%</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># By default, excluded codes are labeled with the codes concatenated together.</span></span></span>
<span class="r-in"><span><span class="co"># You can provide a custom label using exclude_label</span></span></span>
<span class="r-in"><span><span class="fu">build_mtable</span><span class="op">(</span><span class="va">clothes_opinions</span>,</span></span>
<span class="r-in"><span>             <span class="st">"Q2"</span>,</span></span>
<span class="r-in"><span>             use_NA <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>             table_title <span class="op">=</span> <span class="st">"What is your favourite colour?"</span>,</span></span>
<span class="r-in"><span>             exclude_codes <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>             exclude_label <span class="op">=</span> <span class="st">"Not selected"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">What is your favourite colour?</span> <span style="color: #00BBBB;">──────────────────────────────────────────────</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A xlr_table: 7 x 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Q2                 N N_group Percent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_pct&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Black            897   1,000     90%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Blue             192   1,000     19%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Green            323   1,000     32%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Grey             494   1,000     49%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> Red              792   1,000     79%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> Yellow           208   1,000     21%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> Not selected       5   1,000      0%</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># exclude_codes works with all other parameters including cuts and weights</span></span></span>
<span class="r-in"><span><span class="fu">build_mtable</span><span class="op">(</span><span class="va">clothes_opinions</span>,</span></span>
<span class="r-in"><span>             <span class="st">"Q2"</span>,</span></span>
<span class="r-in"><span>             <span class="va">gender2</span>,</span></span>
<span class="r-in"><span>             table_title <span class="op">=</span> <span class="st">"Your favourite colour by gender"</span>,</span></span>
<span class="r-in"><span>             exclude_codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="op">-</span><span class="fl">99</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>             exclude_label <span class="op">=</span> <span class="st">"No response"</span>,</span></span>
<span class="r-in"><span>             wt <span class="op">=</span> <span class="va">weight</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Your favourite colour by gender</span> <span style="color: #00BBBB;">─────────────────────────────────────────────</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A xlr_table: 20 x 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    gender2    Q2                  N   N_group Percent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;x_num&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;x_num&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_pct&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> male       Black       422,100.0 470,171.0     90%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> male       Blue         78,108.0 470,171.0     17%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> male       Green       146,440.0 470,171.0     31%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> male       Grey        232,228.0 470,171.0     49%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> male       Red         373,520.0 470,171.0     79%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> male       Yellow      106,110.0 470,171.0     23%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> male       No response     645.0 470,171.0      0%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> female     Black       421,416.0 471,572.0     89%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> female     Blue         99,852.0 471,572.0     21%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> female     Green       157,654.0 471,572.0     33%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> female     Grey        249,450.0 471,572.0     53%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> female     Red         357,249.0 471,572.0     76%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> female     Yellow       89,559.0 471,572.0     19%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> female     No response   6,436.0 471,572.0      1%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> non-binary Black        76,548.0  80,670.0     95%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> non-binary Blue         11,316.0  80,670.0     14%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">17</span> non-binary Green        18,349.0  80,670.0     23%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">18</span> non-binary Grey         32,864.0  80,670.0     41%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">19</span> non-binary Red          68,508.0  80,670.0     85%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">20</span> non-binary Yellow       20,650.0  80,670.0     26%</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># When working with two multiple response columns, exclude_codes applies</span></span></span>
<span class="r-in"><span><span class="co"># to both columns</span></span></span>
<span class="r-in"><span><span class="va">clothes_opinions</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">Q3_other</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">build_mtable</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Q2"</span>, <span class="st">"Q3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               <span class="va">gender2</span>,</span></span>
<span class="r-in"><span>               exclude_codes <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>               exclude_label <span class="op">=</span> <span class="st">"Not selected"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A xlr_table: 57 x 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    gender2  Q2       Q3              N N_group Percent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_vctr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;x_pct&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> male     Black    Earrings      127     413     31%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> male     Black    Necklaces      78     413     19%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> male     Black    Rings         315     413     76%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> male     Blue     Earrings       23      82     28%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> male     Blue     Necklaces      21      82     26%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> male     Blue     Rings          61      82     74%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> male     Green    Earrings       43     144     30%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> male     Green    Necklaces      31     144     22%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> male     Green    Rings         108     144     75%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> male     Grey     Earrings       72     225     32%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 47 more rows</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nicholas Hilderson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

